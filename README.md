# 2026 Happy Yuan Day - 媛氣加分

這是一款由 weand_studio 製作的網頁遊戲，用來慶祝幻藍小熊成員 許媛媛的生日。

這款遊戲是一個有趣的互動體驗，玩家幫助「小媛寶」接住物品以獲取分數，並回答關於媛媛的測驗問題。該專案還設有全球里程碑和個人成就獎勵系統。

## 遊戲玩法

1.  **開始遊戲**：在瀏覽器中打開`index.html`檔案。遊戲會自動載入資源並顯示進度條。
2.  **控制小媛寶**：
    - 桌面版：使用左右方向鍵（← →）來移動角色。
    - 行動裝置：使用螢幕底部的左右按鈕來控制。
3.  **接住物品**：不同物品會從螢幕頂部掉落，每種物品有不同的分數和效果。
    - **正面物品**：
      - 白色愛心：+10 分
      - 小熊餅乾：+25 分
      - 吉他：+40 分
    - **負面物品**（需避免）：
      - 燒焦餅乾：-20 分
      - 鬧鐘：-35 分
    - **特殊物品**：
      - 應援手燈：+80 分（稀有物品）
    - **問題物品**：接住後會觸發測驗問題，答對 +100 分，答錯 -50 分。
4.  **應援力量（熱潮時間）**：接住正面物品會累積「應援力量」值，當達到 100% 時會啟動熱潮時間，短時間內：
    - 得分加倍
    - 物品生成速度加快
    - 背景音樂切換為熱潮模式
5.  **遊戲統計**：每局遊戲結束後會顯示詳細統計，包括：
    - 接到正面物品數量
    - 接到負面物品數量
    - 答對/答錯問題數量
6.  **遊戲結束**：每局遊戲時間為 60 秒，結束後分數會自動提交至全球里程碑系統。

## 特色功能

- **搜尋引擎優化 (SEO)**：已整合必要的 SEO meta 標籤，提升網站在搜尋引擎上的可見性，並優化社群媒體分享效果。
- **掉落物品遊戲**：經典街機風格玩法，流暢的動畫效果和即時反饋。
- **測驗系統**：通過一系列多選題測試對媛的了解，答對可獲得額外分數。
- **多語言支援**：遊戲介面及問題提供繁體中文 (`zh-TW`) 及英語 (`en`) 版本。
- **個人里程碑系統**：累積總分數以解鎖三個階段的個人獎勵：
  - 第一階段（10,000 分）：數位小卡獎勵
  - 第二階段（25,000 分）：實體抽獎資格
  - 第三階段（50,000 分）：限定月曆卡抽獎資格
- **全球里程碑系統**：所有玩家分數匯總，共同達成全球目標分數後，達成後可解鎖特殊事件。
- **進度管理**：
  - 玩家進度使用瀏覽器中的唯一匿名用戶 ID 保存在本地存儲。
  - **離線儲存與同步**：即使在離線狀態下，遊戲分數也會暫存於本機。當網路恢復連線時，系統會自動將累積的離線紀錄上傳至 Firebase。
  - 可複製用戶 ID 以在不同裝置間轉移進度。
  - 支援匯入其他裝置的進度 ID。
- **IG 抽獎功能**：達成里程碑後可輸入 Instagram 帳號參與抽獎活動。
- **特別生日活動**：若在媛的生日（1 月 5 日）玩遊戲，將顯示特別生日訊息及主題圖片。
- **動畫角色**：玩家角色「小媛寶」具備待機動畫、勝利動畫和失敗動畫。
- **音效系統**：
  - 背景音樂（BGM）
  - 熱潮時間專屬音樂
  - 各種遊戲事件的音效（接物品、答題、遊戲結束等）
  - 可透過靜音按鈕控制音效開關
- **資源載入管理**：顯示載入進度條，確保所有資源正確載入後才開始遊戲。
- **離線處理**：自動檢測網路狀態，離線時顯示提示並支援重試連線。
- **響應式設計**：支援桌面和行動裝置，提供適合不同螢幕尺寸的使用體驗。
- **故障排除功能**：在設定中新增「故障排除」頁面，讓玩家能一鍵清除暫存以修復潛在的顯示異常。

## 技術架構

- **前端**：HTML5、CSS3、JavaScript (ES6+)
- **遊戲引擎**：HTML5 Canvas API
- **後端/資料庫**：Firebase (Firestore)
- **樣式系統**：模組化 CSS 架構
- **多語言支援**：自定義 i18n 系統
- **響應式設計**：支援桌面與行動裝置

## 本地執行方式

1.  複製或下載此專案
2.  在瀏覽器中打開 `index.html` 檔案
3.  遊戲會自動載入所有資源，載入完成後即可開始遊玩
4.  **注意**：部分功能需要網路連線（全球里程碑、個人成就等）

## 專案結構

```
2026 Happy Yuan Day/
├── index.html              # 遊戲主頁面
├── favicon.ico             # 網站圖示
├── README.md               # 專案說明文件
│
├── js/                     # JavaScript 原始碼
│   ├── managers/           # 模組化管理器
│   │   ├── audio-manager.js      # 音效與音樂管理
│   │   ├── database-manager.js   # Firebase 資料庫操作
│   │   ├── effect-manager.js     # 視覺特效系統
│   │   ├── input-manager.js      # 輸入管理 (鍵盤與觸控)
│   │   ├── item-manager.js       # 掉落物品管理
│   │   ├── share-manager.js      # 分享卡片生成
│   │   └── ui-manager.js         # UI 介面管理
│   ├── game.js             # 主遊戲邏輯
│   ├── game-config.js      # 遊戲設定檔
│   ├── lang.js             # 多語系字串
│   ├── player.js           # 玩家角色邏輯
│   ├── questions.js        # 測驗題庫
│   └── offline-handler.js  # 離線狀態處理
│
├── styles/                 # CSS 模組化樣式
│   ├── variables.css       # CSS 變數定義
│   ├── base.css            # 基礎樣式
│   ├── buttons.css         # 按鈕樣式
│   ├── game-ui.css         # 遊戲介面
│   ├── modals.css          # 彈窗樣式
│   ├── milestones.css      # 里程碑介面
│   ├── loading.css         # 載入畫面
│   └── animations.css      # 動畫效果
│
├── images/                 # 遊戲圖片資源
├── audio/                  # 音效與音樂檔案
└── docs/                   # 技術文檔
```

### 模組化架構說明

專案採用**模組化設計**，將功能拆分為獨立的管理器（Manager），提升程式碼可維護性：

- **AudioManager**: 統一管理所有音效與背景音樂，包含音效池（AudioPool）機制防止音效重疊
- **DatabaseManager**: 封裝 Firebase 操作，處理玩家資料、分數上傳和里程碑系統
- **EffectManager**: 處理 Canvas 視覺特效，包含分數飄字動畫和 Fever Time 特效
- **InputManager**: 統一處理鍵盤與觸控輸入，管理玩家移動狀態。
- **ItemManager**: 管理遊戲中所有掉落物品的生成、移動、碰撞偵測與銷毀。
- **ShareManager**: 負責生成分享卡片、QR Code 和社群分享功能
- **UIManager**: 集中管理所有 UI 元素更新、畫面切換和使用者互動
- **Player**: 封裝玩家角色（小媛寶）的狀態、行為邏輯與繪製。

> 💡 **技術細節**：模組化架構讓每個功能職責單一、易於測試和維護。詳細的架構說明可參考 `docs/` 目錄中的技術文檔。

## 瀏覽器支援

- ✅ Chrome / Edge (推薦)
- ✅ Firefox
- ✅ Safari (iOS / macOS)

## 授權與致謝

由 **weand_studio** 製作，獻給幻藍小熊成員 許媛媛的生日應援專案。

---

**版本**: 2.2 | **最後更新**: 2025-12-03
